angular.module("ng-leaflet",[]),function(){"use strict";function e(e,n,r){return{restrict:"E",replace:!0,transclude:!0,scope:{ngConfig:"="},controller:["$attrs","$element","$scope",function(e,n,t){var a=this;a.options=r.setDefaults(t.ngConfig.options),a.map=L.map(n[0],a.options);var i=L.layerGroup().addTo(a.map),o=L.layerGroup().addTo(a.map);a.addMarker=function(e){i.addLayer(e)},a.addPolyline=function(e){var n=L.Polyline.fromEncoded(e);o.addLayer(n)},a.removeMarker=function(e){i.removeLayer(e)},a.clearMarkers=function(){i.clearLayers()},a.removePolyline=function(){o.clearLayers()}}],link:function(n,r,t,a){e.setConfigurations(t,n.ngConfig,r,a.map);var i=L.tileLayer(a.options.tileLayer,a.options.tileLayerOptions);a.map.addLayer(i)},template:"<div><ng-transclude></ng-transclude></div>"}}angular.module("ng-leaflet").directive("ngLeafletMap",e),e.$inject=["$leafletConfig","$leafletHelper","$leafletOptionsDefault"]}(),function(){"use strict";function e(e,n,r){return{require:"^^ngLeafletMap",restrict:"E",scope:{ngConfigMarker:"=",ngMarkers:"="},link:function(t,a,i,o){function l(n){t.ngMarkers.push(n),r.registerMarker(n),n.on("contextmenu",function(e){o.removeMarker(n)}),n.on("remove",function(a){e.remove(t.ngMarkers,n),r.removeMarker(n)})}e.isDefined(t.ngConfigMarker)&&(t.ngConfigMarker.readOnly=!!e.isDefined(t.ngConfigMarker.readOnly)&&t.ngConfigMarker.readOnly,t.ngConfigMarker.limit=e.isDefined(t.ngConfigMarker.limit)?t.ngConfigMarker.limit:23),t.ngMarkers=e.isDefined(t.ngMarkers)?t.ngMarkers:[];var f=o.map;t.$watch("ngMarkers",function(e,n){n!=e&&(o.clearMarkers(),e.forEach(function(e){o.addMarker(e),t.ngConfigMarker.readOnly||l(e)}))}),t.ngConfigMarker.readOnly||f.on("click",function(e){if(t.ngMarkers.length>=t.ngConfigMarker.limit)alert("Limite de marcadores atingidos");else{var r=n.createMarker(e.latlng.lat,e.latlng.lng,!0);o.addMarker(r),l(r)}})}}}angular.module("ng-leaflet").directive("ngLeafletMarker",e),e.$inject=["$leafletHelper","$leafletMarkerConvert","$leafletMarkerData"]}(),function(){"use strict";function e(e){return{require:"^^ngLeafletMap",restrict:"E",scope:{ngPath:"="},link:function(n,r,t,a){e.isDefined(n.ngPath)&&a.addPolyline(n.ngPath),n.$watch("ngPath",function(e,n){e!=n&&(a.removePolyline(),a.addPolyline(e))})}}}angular.module("ng-leaflet").directive("ngLeafletPolyline",e),e.$inject=["$leafletHelper"]}(),function(){"use strict";angular.module("ng-leaflet").factory("$leafletMarker",function(){return{createMarker:function(e,n,r){return L.marker([e,n],{draggable:r})}}})}(),function(){"use strict";function e(e){return{getOptionsDefault:function(){return{keyboard:!0,dragging:!0,zoomControl:!0,tileLayer:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}}},setDefaults:function(n){var r={keyboard:!0,dragging:!0,zoomControl:!0,tileLayer:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}};return e.isDefined(n)&&(r.keyboard=e.isDefined(n.keyboard)?n.keyboard:r.keyboard,r.dragging=e.isDefined(n.dragging)?n.dragging:r.dragging,r.zoomControl=e.isDefined(n.zoomControl)?n.zoomControl:r.zoomControl,r.tileLayer=e.isDefined(n.tileLayer)?n.tileLayer:r.tileLayer),r}}}angular.module("ng-leaflet").factory("$leafletOptionsDefault",e),e.$inject=["$leafletHelper"]}(),function(){"use strict";function e(e){function n(n,r){if(e.isDefined(n.center)){var a=e.isDefined(n.center.lat)?n.center.lat:-3.71839,i=e.isDefined(n.center.lgt)?n.center.lgt:-38.5434,o=e.isDefined(n.center.zoom)?n.center.zoom:9;r.setView([a,i],o)}t(n,r)}function r(n,r){e.isDefined(n.zoomControlPosition)&&r.zoomControl.setPosition(n.zoomControlPosition)}function t(e,n){e.geoLocate&&n.locate({setView:!0})}function a(n,r){if(e.isDefined(n.width)){var t=isNaN(n.width)?n.width:n.width+"px";r.css("width",t)}if(e.isDefined(n.height)){var a=isNaN(n.height)?n.height:n.height+"px";r.css("height",a)}}this.setConfigurations=function(e,t,i,o){a(e,i),n(t,o),r(t,o)}}angular.module("ng-leaflet").service("$leafletConfig",e),e.$inject=["$leafletHelper"]}(),function(){"use strict";angular.module("ng-leaflet").service("$leafletHelper",function(){var e=this;e.isDefined=function(e){return angular.isDefined(e)&&null!==e},e.remove=function(e,n){var r=e.indexOf(n);r>-1&&e.splice(r,1)}})}(),function(){"use strict";function e(e){var n=this;n.createMarker=function(n,r,t){return e.createMarker(n,r,t)},n.objectFromMarker=function(e){return{latitude:e._latlng.lat,longitude:e._latlng.lng}}}angular.module("ng-leaflet").service("$leafletMarkerConvert",e),e.$inject=["$leafletMarker"]}(),function(){"use strict";function e(e){var n=this,r=[];n.getMarkers=function(){return r},n.clearMarkers=function(){r=[]},n.registerMarker=function(e){r.push(e)},n.removeMarker=function(n){e.remove(r,n)}}angular.module("ng-leaflet").service("$leafletMarkerData",e),e.$inject=["$leafletHelper"]}();